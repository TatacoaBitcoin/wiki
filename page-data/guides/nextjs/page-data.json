{"componentChunkName":"component---src-templates-docs-js","path":"/guides/nextjs","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Gitbook Boilerplate | Hasura","docsLocation":"https://github.com/hasura/gatsby-gitbook-boilerplate/tree/master/content"}},"mdx":{"fields":{"id":"fb5bfccc-3a26-517b-af56-9975be6454fa","title":"NextJS","slug":"/guides/nextjs"},"body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"NextJS\",\n  \"metaTitle\": \"Guías - NextJS\",\n  \"metaDescription\": \"How-to guides\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", null, \"Server\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"# apt update\\n# apt install curl nginx\\n\")), mdx(\"h2\", null, \"nvm\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"# curl https://raw.githubusercontent.com/creationix/nvm/master/install.sh | bash\\n# source ~/.bashrc\\n\")), mdx(\"h2\", null, \"Node\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"# nvm install node\\n# node --version\\n\")), mdx(\"h1\", null, \"Deployment\"), mdx(\"p\", null, \"nginx\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"vi /etc/nginx/nginx.conf\\n\\nhttp {\\n    ....\\n    ##\\n    # Connection header for WebSocket reverse proxy\\n    ##\\n    map $http_upgrade $connection_upgrade {\\n            default upgrade;\\n            ''      close;\\n    }\\n    ....\\n}\\n\\n\\nvi /etc/nginx/sites-available/api-docs.tatacoabitcoin.com.conf\\n\\nserver {\\n  server_name api-docs.tatacoabitcoin.com;\\n  access_log /var/log/nginx/api-docs.tatacoabitcoin.com-access.log;\\n  error_log /var/log/nginx/api-docs.tatacoabitcoin.com-error.log;\\n\\n  location / {\\n    proxy_set_header X-NginX-Proxy true;\\n    proxy_set_header X-Real-IP $remote_addr;\\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\\n    proxy_set_header X-Forwarded-Proto $scheme;\\n    proxy_set_header Host $http_host;\\n\\n    proxy_set_header Upgrade $http_upgrade;\\n    proxy_set_header Connection $connection_upgrade;\\n\\n    proxy_redirect off;\\n    proxy_buffering off;\\n\\n    proxy_pass http://127.0.0.1:8009;\\n  }\\n}\\n\\nln -s /etc/nginx/sites-available/api-docs.tatacoabitcoin.com.conf /etc/nginx/sites-enabled/\\n\")), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://futurestud.io/tutorials/nginx-how-to-fix-unknown-connection_upgrade-variable\"\n  }, \"https://futurestud.io/tutorials/nginx-how-to-fix-unknown-connection_upgrade-variable\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"nginx -t\\n\")), mdx(\"p\", null, \"SSL\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"# apt install snapd\\n# snap install core\\n# snap refresh core\\n# snap install --classic certbot\\n# ln -s /snap/bin/certbot /usr/bin/certbot\\n# certbot\\n# systemctl restart nginx\\n\")), mdx(\"p\", null, \"App\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"# apt install git\\n# npm install -g pm2\\ngit clone https://github.com/TatacoaBitcoin/api-docs-next.git api-docs.tatacoabitcoin.com\\ncd api-docs.tatacoabitcoin.com\\n\\nvi package.json\\n\\n\\\"start\\\": \\\"next start -p 8009\\\",\\n\\nopenssl rand -base64 32\\necho NEXTAUTH_SECRET=secret > .env.local\\n\\nnpm install\\nnpm run build\\npm2 start -n api-docs \\\"npm start\\\"\\n\")), mdx(\"p\", null, \"Update\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"git pull\\nnpm install\\nnpm run build\\npm2 restart\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"items":[{"url":"#server","title":"Server"},{"url":"#nvm","title":"nvm"},{"url":"#node","title":"Node"}]},{"url":"#deployment","title":"Deployment"}]},"parent":{"relativePath":"guides/nextjs.md"},"frontmatter":{"metaTitle":"Guías - NextJS","metaDescription":"How-to guides"}},"allMdx":{"edges":[{"node":{"fields":{"slug":"/guides","title":"Guías"}}},{"node":{"fields":{"slug":"/","title":"Tatacoa Wiki"}}},{"node":{"fields":{"slug":"/guides/debian","title":"Debian Server"}}},{"node":{"fields":{"slug":"/guides/dev","title":"Dev"}}},{"node":{"fields":{"slug":"/guides/gatsby","title":"Gatsby"}}},{"node":{"fields":{"slug":"/guides/lnbits","title":"LNBits"}}},{"node":{"fields":{"slug":"/guides/lnd","title":"LND"}}},{"node":{"fields":{"slug":"/guides/mysql","title":"MySQL"}}},{"node":{"fields":{"slug":"/guides/nextjs","title":"NextJS"}}},{"node":{"fields":{"slug":"/guides/node","title":"Node"}}},{"node":{"fields":{"slug":"/guides/ops","title":"OPS"}}},{"node":{"fields":{"slug":"/guides/prestashop","title":"Prestashop"}}},{"node":{"fields":{"slug":"/guides/psql","title":"PSQL"}}},{"node":{"fields":{"slug":"/guides/btcpay","title":"BTCPay Server"}}},{"node":{"fields":{"slug":"/guides/react","title":"React"}}},{"node":{"fields":{"slug":"/guides/wordpress","title":"Wordpress"}}}]}},"pageContext":{"id":"fb5bfccc-3a26-517b-af56-9975be6454fa"}},"staticQueryHashes":["2619113677","3706406642","417421954"]}